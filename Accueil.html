<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accueil</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding-top: 60px;
            background-color: #f4f4f4;
        }
        header {
            background: #333;
            color: #fff;
            padding: 10px 0;
            text-align: center;
        }
        section {
            padding: 20px;
            margin: 10px;
            background: #ff0000;
            border-radius: 5px;
        }
        h2 {
            color: #333;
        }
        .project {
            margin-bottom: 20px;
        }
        footer {
            text-align: center;
            padding: 10px 0;
            background: #333;
            color: #fff;
            position: relative;
            bottom: 0;
            width: 100%;
        }

        /* ======= MENU ======= */
        .bandeau {
            background-color: #000000;
            padding: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            background-image: url('https://png.pngtree.com/thumb_back/fw800/background/20190813/pngtree-digital-technology-blue-background-banner-image_298195.jpg');
            background-size: cover;
            background-position: center;
        }

        /* Bouton burger */
        .menu-btn {
            font-size: 26px;
            cursor: pointer;
            color: white;
            background: none;
            border: none;
            display: none;
        }

        /* Liens du menu */
        .menu-links {
            display: flex;
            gap: 15px;
        }

        .menu-links a {
            color: rgb(0, 0, 0);
            text-decoration: none;
            font-size: 18px;
            font-weight: bold;
            transition: color 0.3s ease;
            display: inline-block;
        }

        .menu-links a:hover {
            color: yellow;
        }

        /* ======= MODE MOBILE ======= */
        @media (max-width: 768px) {
            .menu-btn {
                display: block;
            }

            .menu-links {
                display: none;
                flex-direction: column;
                position: absolute;
                top: 60px;
                left: 0;
                width: 100%;
                background: rgba(0, 0, 0, 0.9);
                text-align: center;
            }

            .menu-links.active {
                display: flex;
            }

            .menu-links a {
                color: white;
                padding: 15px 0;
                border-bottom: 1px solid #444;
            }

            .bandeau {
                padding: 10px 20px;
            }
        }
        
        .main-content {
            padding: 20px;
            min-height: calc(100vh - 100px);
            text-align: center;
        }
        
        .welcome-section {
            background: #fff;
            padding: 40px;
            margin: 20px auto;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            max-width: 800px;
        }
        
        .welcome-section h1 {
            color: #333;
            margin-bottom: 10px;
            font-size: 2.5em;
        }
        
        .welcome-section p {
            color: #666;
            font-size: 1.1em;
            line-height: 1.6;
        }
        
        #class-selection-container {
            margin-top: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background-color: #f9f9f9;
        }
        
        .class-select-btn {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.0em;
            transition: background-color 0.3s ease;
        }
        
        .class-select-btn:hover {
            background-color: #0056b3;
        }
        
    </style>
</head>
<body>

    <div class="bandeau">
        <div style="font-size: 24px; font-weight: bold; color: yellow;">My Project</div>
        <button class="menu-btn" onclick="toggleMenu()">&#9776;</button>
        <nav class="menu-links" id="menuLinks">
            <a href="index.html">Accueil</a>
            <a href="Physique Chimie.html">Cours de Physique-Chimie (Général)</a>
            
            <a href="Cours de 2nd.html" data-class="Seconde">Cours Seconde</a>
            <a href="Cours de 1ère.html" data-class="Première">Cours Première</a>
            <a href="Cours de Terminal.html" data-class="Terminale">Cours Terminale</a>

            <a href="Quiz de connaissance de 2nd.html" data-class="Seconde">Quiz Seconde</a>
            <a href="Quiz de révision de 1ère.html" data-class="Première">Quiz Première</a>
            <a href="Quiz de connaissance de Terminal.html" data-class="Terminale">Quiz Terminale</a>

            <a href="Connexion étudiant.html" id="authLink">Connexion Étudiant</a>
        </nav>
    </div>

    <div class="main-content">
        <div class="welcome-section" id="welcome-section">
            </div>
    </div>

    <footer>
        &copy; 2024 My Project. Tous droits réservés.
    </footer>

    <script>
        // --- CONSTANTES ---
        const LOGIN_PAGE = "Connexion étudiant.html";
        const classOrder = {
            "Seconde": 1,
            "Première": 2,
            "Terminale": 3
        };

        // Fonction utilitaire pour obtenir la page de cours spécifique
        function getCoursePageURL(className) {
            switch (className) {
                case 'Seconde':
                    return 'Cours de 2nd.html'; 
                case 'Première':
                    // Mise à jour : Utilisation de Cours de 1ère.html
                    return 'Cours de 1ère.html'; 
                case 'Terminale':
                    // Mise à jour : Utilisation de Cours de Terminal.html
                    return 'Cours de Terminal.html'; 
                default:
                    // Page générale de cours par défaut
                    return 'Physique Chimie.html'; 
            }
        }
        
        // Nouvelle fonction utilitaire pour obtenir la page de quiz spécifique
        function getQuizPageURL(className) {
            switch (className) {
                case 'Seconde':
                    return 'Quiz de connaissance de 2nd.html'; 
                case 'Première':
                    return 'Quiz de révision de 1ère.html'; 
                case 'Terminale':
                    return 'Quiz de connaissance de Terminal.html'; 
                default:
                    // Quiz par défaut si la classe n'est pas trouvée
                    return 'Quiz de connaissance de 2nd.html'; 
            }
        }


        // --- FONCTIONS DE GESTION DE LA CONNEXION/CLASSE ---

        // Fonction de déconnexion
        function logout() {
            if (confirm("Voulez-vous vous déconnecter ?")) {
                localStorage.removeItem('isLoggedIn');
                localStorage.removeItem('currentUser');
                localStorage.removeItem('studentClass');
                window.location.replace(LOGIN_PAGE);
            }
        }

        // Fonction pour définir la classe de l'étudiant
        function setStudentClass(className) {
            localStorage.setItem('studentClass', className);
            // Redirige vers la page de cours spécifique après sélection
            const redirectPage = getCoursePageURL(className); 
            window.location.replace(redirectPage);
        }

        // Fonction pour gérer l'affichage des liens dans le menu (contrôle d'accès)
        function applyAccessControl() {
            const authLink = document.getElementById('authLink');
            const menuLinksContainer = document.getElementById('menuLinks');
            const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
            const studentClass = localStorage.getItem('studentClass');

            // 1. LIEN CONNEXION / DÉCONNEXION
            if (isLoggedIn && studentClass) {
                authLink.textContent = `Déconnexion (${studentClass})`;
                authLink.href = "#";
                authLink.onclick = logout;
            } else {
                 authLink.textContent = "Connexion Étudiant";
                 authLink.href = LOGIN_PAGE;
                 authLink.onclick = null;
            }
            
            // 2. FILTRAGE DES LIENS (COURS & QUIZ)
            const studentLevel = classOrder[studentClass] || 0;
            const restrictedLinks = menuLinksContainer.querySelectorAll('a[data-class]');
            
            restrictedLinks.forEach(link => {
                const requiredClass = link.getAttribute('data-class');
                const requiredLevel = classOrder[requiredClass];
                
                // Masquer si non connecté OU si le niveau requis est supérieur
                if (!isLoggedIn || requiredLevel > studentLevel) {
                    link.style.display = 'none'; 
                } else {
                    link.style.display = 'inline-block'; 
                }
            });

        }

        // Fonction pour rendre le contenu de la page d'accueil
        function renderHomePageContent() {
            const container = document.getElementById('welcome-section');
            const studentClass = localStorage.getItem('studentClass');
            
            if (studentClass) {
                const courseURL = getCoursePageURL(studentClass); 
                const quizURL = getQuizPageURL(studentClass);
                
                // Si la classe est déjà définie
                container.innerHTML = `
                    <h1>Bienvenue, Élève de ${studentClass} !</h1>
                    <p>
                        Vous êtes maintenant connecté à l'espace de cours. 
                        Choisissez une action ci-dessous ou utilisez le menu de navigation.
                    </p>
                    <div style="margin-top: 30px;">
                        <button class="class-select-btn" onclick="window.location.href='${courseURL}'">Accéder à mes Cours</button>
                        <button class="class-select-btn" onclick="window.location.href='${quizURL}'">Faire un Quiz de révision</button>
                    </div>
                `;
            } else {
                // Si la classe n'est pas encore définie
                container.innerHTML = `
                    <h1>Bienvenue sur My Project !</h1>
                    <p>
                        Pour commencer, veuillez **choisir votre classe** pour accéder aux cours et aux quiz appropriés.
                    </p>
                    <div style="margin-top: 20px;">
                        <button class="class-select-btn" onclick="setStudentClass('Seconde')">Seconde</button>
                        <button class="class-select-btn" onclick="setStudentClass('Première')">Première</button>
                        <button class="class-select-btn" onclick="setStudentClass('Terminale')">Terminale</button>
                    </div>
                `;
            }
            // Appliquer le filtre de menu après le rendu
            applyAccessControl();
        }


        // --- EXÉCUTION AU CHARGEMENT ---
        document.addEventListener('DOMContentLoaded', () => {
            const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';

            // if (!isLoggedIn) {
            //     // Logique de redirection vers la page de connexion
            // }
            
            // Si connecté, RENDRE le contenu de la page d'accueil (incluant le choix de classe si nécessaire)
            renderHomePageContent();
        });

        // Fonction pour le menu mobile
        function toggleMenu() {
            document.getElementById("menuLinks").classList.toggle("active");
        }
    </script>
</body>
</html>

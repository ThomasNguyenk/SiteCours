<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accueil</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding-top: 60px;
            background-color: #f4f4f4;
        }
        footer {
            text-align: center;
            padding: 10px 0;
            background: #333;
            color: #fff;
            position: relative;
            bottom: 0;
            width: 100%;
        }

        /* ======= MENU ======= */
        .bandeau {
            background-color: #000000;
            padding: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            background-image: url('https://png.pngtree.com/thumb_back/fw800/background/20190813/pngtree-digital-technology-blue-background-banner-image_298195.jpg');
            background-size: cover;
            background-position: center;
        }
        .menu-btn {
            font-size: 26px;
            cursor: pointer;
            color: white;
            background: none;
            border: none;
            display: none;
        }
        .menu-links {
            display: flex;
            gap: 15px;
        }
        .menu-links a {
            color: rgb(0, 0, 0);
            text-decoration: none;
            font-size: 18px;
            font-weight: bold;
            transition: color 0.3s ease;
            display: none; /* Cacher par défaut, affiché par JS */
        }
        .menu-links a:hover {
            color: yellow;
        }

        /* ======= MODE MOBILE ======= */
        @media (max-width: 768px) {
            .menu-btn { display: block; }
            .menu-links {
                display: none;
                flex-direction: column;
                position: absolute;
                top: 60px;
                left: 0;
                width: 100%;
                background: rgba(0, 0, 0, 0.9);
                text-align: center;
            }
            .menu-links.active { display: flex; }
            .menu-links a { color: white; padding: 15px 0; border-bottom: 1px solid #444; display: block !important; }
            .bandeau { padding: 10px 20px; }
        }
        
        .main-content {
            padding: 20px;
            min-height: calc(100vh - 100px);
            text-align: center;
        }
        
        .welcome-section {
            background: #fff;
            padding: 40px;
            margin: 20px auto;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            max-width: 800px;
        }
        
        .class-select-btn {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.0em;
            transition: background-color 0.3s ease;
        }
        .class-select-btn:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>

    <div class="bandeau">
        <div style="font-size: 24px; font-weight: bold; color: yellow;">My Project</div>
        <button class="menu-btn" onclick="toggleMenu()">&#9776;</button>
        <nav class="menu-links" id="menuLinks">
            <a href="Accueil.html">Accueil</a>
            <a href="Physique Chimie.html">Cours de Physique-Chimie (Général)</a>
            
            <a href="Cours de 2nd.html" data-class="Seconde">Cours Seconde</a>
            <a href="Cours de 1ère.html" data-class="Première">Cours Première</a>
            <a href="Cours de Terminal.html" data-class="Terminale">Cours Terminale</a>

            <a href="Quiz de connaissance de 2nd.html" data-class="Seconde">Quiz Seconde</a>
            <a href="Quiz de révision de 1ère.html" data-class="Première">Quiz Première</a>
            <a href="Quiz de connaissance de Terminal.html" data-class="Terminale">Quiz Terminale</a>

            <a href="Connexion étudiant.html" id="authLink">Connexion Étudiant</a>
        </nav>
    </div>

    <div class="main-content">
        <div class="welcome-section" id="welcome-section">
            </div>
    </div>

    <footer>
        &copy; 2024 My Project. Tous droits réservés.
    </footer>

    <script>
        // --- CONSTANTES ---
        const LOGIN_PAGE = "Connexion étudiant.html";
        const classOrder = {
            "Seconde": 1,
            "Première": 2,
            "Terminale": 3
        };

        // Mappage de la classe vers la page de cours
        function getCoursePageURL(className) {
            switch (className) {
                case 'Seconde': return 'Cours de 2nd.html'; 
                case 'Première': return 'Cours de 1ère.html'; 
                case 'Terminale': return 'Cours de Terminal.html'; 
                default: return 'Physique Chimie.html';
            }
        }
        
        // Mappage de la classe vers la page de quiz
        function getQuizPageURL(className) {
            switch (className) {
                case 'Seconde': return 'Quiz de connaissance de 2nd.html'; 
                case 'Première': return 'Quiz de révision de 1ère.html'; 
                case 'Terminale': return 'Quiz de connaissance de Terminal.html'; 
                default: return 'Quiz de connaissance de 2nd.html';
            }
        }

        // --- FONCTIONS DE GESTION ---

        function logout() {
            if (confirm("Voulez-vous vous déconnecter ?")) {
                localStorage.removeItem('isLoggedIn');
                localStorage.removeItem('currentUser');
                localStorage.removeItem('studentClass');
                window.location.replace(LOGIN_PAGE);
            }
        }

        function setStudentClass(className) {
            localStorage.setItem('studentClass', className);
            const redirectPage = getCoursePageURL(className); 
            window.location.replace(redirectPage);
        }

        function applyAccessControl() {
            const authLink = document.getElementById('authLink');
            const menuLinksContainer = document.getElementById('menuLinks');
            const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
            const studentClass = localStorage.getItem('studentClass');

            // 1. LIEN CONNEXION / DÉCONNEXION
            if (isLoggedIn && studentClass) {
                authLink.textContent = `Déconnexion (${studentClass})`;
                authLink.href = "#";
                authLink.onclick = logout;
            } else {
                 authLink.textContent = "Connexion Étudiant";
                 authLink.href = LOGIN_PAGE;
                 authLink.onclick = null;
            }
            
            // 2. FILTRAGE DES LIENS
            const studentLevel = classOrder[studentClass] || 0;
            const links = menuLinksContainer.querySelectorAll('a');
            
            links.forEach(link => {
                const requiredClass = link.getAttribute('data-class');
                const isRestricted = requiredClass !== null;
                const isSystemLink = !isRestricted;

                if (isSystemLink) {
                    // Toujours afficher Accueil, Physique Chimie, et le lien d'authentification
                    link.style.display = 'inline-block';
                } else {
                    // Gérer les liens restreints (Cours/Quiz)
                    const requiredLevel = classOrder[requiredClass];
                    
                    if (isLoggedIn && requiredLevel <= studentLevel) {
                        link.style.display = 'inline-block'; 
                    } else {
                        link.style.display = 'none'; 
                    }
                }
            });
        }

        function renderHomePageContent() {
            const container = document.getElementById('welcome-section');
            const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
            const studentClass = localStorage.getItem('studentClass');
            
            if (isLoggedIn) {
                if (studentClass) {
                    const courseURL = getCoursePageURL(studentClass); 
                    const quizURL = getQuizPageURL(studentClass);
                    
                    // Si connecté ET classe définie
                    container.innerHTML = `
                        <h1>Bienvenue, Élève de ${studentClass} !</h1>
                        <p>
                            Vous êtes maintenant connecté à l'espace de cours. 
                            Accédez directement à vos ressources ou utilisez le menu.
                        </p>
                        <div style="margin-top: 30px;">
                            <button class="class-select-btn" onclick="window.location.href='${courseURL}'">Accéder à mes Cours</button>
                            <button class="class-select-btn" onclick="window.location.href='${quizURL}'">Faire mon Quiz</button>
                        </div>
                    `;
                } else {
                    // Si connecté MAIS classe NON définie
                    container.innerHTML = `
                        <h1>Bienvenue sur My Project !</h1>
                        <p>
                            Veuillez **choisir votre classe** pour accéder aux cours et aux quiz appropriés.
                        </p>
                        <div style="margin-top: 20px;">
                            <button class="class-select-btn" onclick="setStudentClass('Seconde')">Seconde</button>
                            <button class="class-select-btn" onclick="setStudentClass('Première')">Première</button>
                            <button class="class-select-btn" onclick="setStudentClass('Terminale')">Terminale</button>
                        </div>
                    `;
                }
            } else {
                 // Si non connecté (message de base)
                container.innerHTML = `
                    <h1>Bienvenue sur My Project !</h1>
                    <p>
                        Veuillez vous **connecter** pour accéder aux cours et aux quiz.
                    </p>
                    <div style="margin-top: 20px;">
                        <button class="class-select-btn" onclick="window.location.href='${LOGIN_PAGE}'">Connexion Étudiant</button>
                    </div>
                `;
            }

            applyAccessControl();
        }


        // --- EXÉCUTION AU CHARGEMENT ---
        document.addEventListener('DOMContentLoaded', renderHomePageContent);

        function toggleMenu() {
            document.getElementById("menuLinks").classList.toggle("active");
        }
    </script>
</body>
</html>
